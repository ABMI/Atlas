<div class="wrapperTitle">
	<span data-bind="if:!$component.loadingReport()">
		<i class="fa fa-area-chart"></i>
	</span> Data Source Reports
</div>

<div data-bind="ifnot:$component.canViewCdmResults">
	<div class="padded">
		<access-denied params="isAuthenticated: isAuthenticated"></access-denied>
	</div>
</div>

<div data-bind="if:$component.canViewCdmResults">
	<!-- ko if:$component.showSelectionArea -->

	<div class="reportControls pad-5">
		<div class="row">
			<div class="col-xs-12">
				<select class="form-control" data-bind="css : { invalid: $component.currentSource()==undefined }, options:$component.sources, optionsText:'sourceName', value:$component.currentSource, optionsCaption:'Select a Source'"></select>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<select class="form-control" data-bind="css : { invalid: $component.currentReport()==undefined }, options:$component.reports, optionsCaption:'Select a Report', optionsText:'name', value:$component.currentReport"></select>
			</div>
		</div>
		<div class="clear"></div>
	</div>
	<!-- /ko -->

<loading params="status: 'loading report'" data-bind="visible:$component.loadingReport() && !$component.hasError()">
</loading>

	<div class="paddedWrapper text-center error" data-bind="visible:$component.hasError()">
		<div>
			<i class="fa fa-exclamation-circle"></i>
		</div>
		<div>error loading report</div>
	</div>

	<div id="report" class="flexed" data-bind="if: $component.currentReport() && !$component.hasError()">
		<div class="row pad-10 report">	
			<!-- ko if: $component.currentReport().name == 'Achilles Heel' && !$component.loadingReport() -->
			<div class="panel panel-primary">
				<div class="panel-heading">
					Achilles Heel Results
				</div>
				<div class="panel-body">
					<table id="achillesheel_table">
						<thead>
							<tr>
								<th>Message Type</th>
								<th>Message</th>
							</tr>
						</thead>
					</table>
				</div>
			</div>
			<!-- /ko -->

			<!-- ko if: $component.currentReport().name == 'Dashboard'-->
				<dashboard params="context: $component"></dashboard>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Data Density' -->
				<datadensity params="context: $component"></datadensity>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Person' -->			
				<person params="context: $component"></person>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Visit' -->
				<visit params="context: $component, report: currentReport()"></visit>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Death' -->
				<death params="context: $component"></death>
			<!-- /ko -->
		</div>
	</div>
</div>
