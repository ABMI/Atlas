<div class="wrapperTitle" data-bind="visible:loading">
    <i class="fa fa-circle-o-notch fa-spin"></i> Loading...
  </div>
  <div data-bind="if:!loading()">
    <div class="wrapperTitle">
      <i class="fa fa-balance-scale"></i> Population Level Effect Estimation - Comparative Cohort Analysis
    </div>
  
    <div class="asset-heading">
      <input type="text" /> <!-- data-bind="textInput: cohortComparison().name, css: { emptyInput: !(cohortComparison().name() && (cohortComparison().name().length > 0)) }" /> -->
      <div class="btn-group" role="group">
        <button class="btn btn-sm btn-success" title="Save" data-bind="click: save, enable:canSave"><i class="fa fa-save"></i></button>
        <button class="btn btn-sm btn-primary" title="Close" data-bind="click: close"><i class="fa fa-times"></i></button>
        <button class="btn btn-sm btn-danger" title="Delete" data-bind="click: $component.delete, enable: canDelete()"><i class="fa fa-trash-o"></i></button>
      </div>
    </div>
    <div id="summary" data-bind="visible: $component.managerMode() == 'summary'">
      <ul class="nav nav-tabs">
        <li role="presentation" data-bind="css: { active: $component.tabMode() == 'specification' }, click: function() { $component.tabMode('specification') };"><a>Specification</a>
        </li>
        <li role="presentation" data-bind="css: { active: $component.tabMode() == 'utilities' }, click: function() { $component.tabMode('utilities') };"><a>Utilities</a>
        </li>
      </ul>
      <div class="tab-content">
        <div role="tabpanel" data-bind="css: { active: $component.tabMode() == 'specification'}" class="tab-pane">
          <div class="paddedWrapper">
            <div id="filters">
              <div class="row">
                  <div class="filter-icon"><i class="fa fa-filter fa-2x"></i></div>
                  <div>
                    <ul class="nav nav-pills">
                      <li role="presentation" data-bind="css: {active: $component.specificationPillMode() == 'all' }, click: function() {$component.specificationPillMode('all') };"><a>All</a></li>
                      <li role="presentation" data-bind="css: {active: $component.specificationPillMode() == 'comparisons' }, click: function() {$component.specificationPillMode('comparisons') };"><a>Comparisons</a></li>
                      <li role="presentation" data-bind="css: {active: $component.specificationPillMode() == 'analysisSettings' }, click: function() {$component.specificationPillMode('analysisSettings') };"><a>Analysis Settings</a></li>
                      <li role="presentation" data-bind="css: {active: $component.specificationPillMode() == 'evaluation' }, click: function() {$component.specificationPillMode('evaluation') };"><a>Evaluation Settings</a></li>
                    </ul>
                  </div>
              </div>
            </div>
              <div role="tabpanel" data-bind="visible: $component.specificationPillMode() == 'all' || $component.specificationPillMode() == 'comparisons'" class="tab-pane">
                <div class="paddedWrapper">
                  <div class="panel panel-primary">
                    <div class="panel-heading">
                      <i class="fa fa-balance-scale"></i> Comparative Cohort Settings
                    </div>
                    <div class="panel-body">
                      <div class="paddedWrapper">
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <i class="fa fa-users"></i> Comparisons
                            <button type="button" class="btn btn-primary btn-sm pull-right" data-bind="click: addComparison"><i class="fa fa-plus"></i> Add Comparison</button>
                          </div>
                          <div class="panel-body">
                              <faceted-datatable params="{ 
                                columns: options.cca.comparisonTableColumns, 
                                options: options.cca.comparisonTableOptions, 
                                pageLength: options.cca.comparisonTableOptions.pageLength,
                                lengthMenu: options.cca.comparisonTableOptions.lengthMenu,
                                dom: options.cca.comparisonTableOptions.dom,
                                reference: $component.comparisons,
                                rowClick: $component.comparisonTableRowClickHandler,
                              }"></faceted-datatable>
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
                </div>
              </div>
              <div role="tabpanel" data-bind="visible: $component.specificationPillMode() == 'all' || $component.specificationPillMode() == 'analysisSettings'" class="tab-pane">
                  <div class="paddedWrapper">
                      <div class="panel panel-primary">
                    <div class="panel-heading">
                      <i class="fa fa-cogs"></i> Effect Estimation Analysis Settings
                    </div>
                    <div class="panel-body">
                        <div class="paddedWrapper">
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              Analysis Settings
                              <button type="button" class="btn btn-primary btn-sm pull-right" data-bind="click: addAnalysis"><i class="fa fa-plus"></i> Add Analysis Settings</button>
                            </div>
                            <div class="panel-body">
                                <faceted-datatable params="{ 
                                  columns: options.cca.analysisSettingsTableColumns, 
                                  options: options.cca.analysisSettingsTableOptions, 
                                  pageLength: options.cca.analysisSettingsTableOptions.pageLength,
                                  lengthMenu: options.cca.analysisSettingsTableOptions.lengthMenu,
                                  dom: options.cca.analysisSettingsTableOptions.dom,
                                  reference: $component.cohortMethodAnalysisList,
                                  rowClick: $component.analysisSettingsTableRowClickHandler,
                                }"></faceted-datatable>
                            </div>
                          </div>
                        </div>
                      </div>
                  </div>
                  </div>
              </div>
              <div role="tabpanel" data-bind="visible: $component.specificationPillMode() == 'all' || $component.specificationPillMode() == 'evaluation'" class="tab-pane">
                <div class="paddedWrapper">
                  <div class="panel panel-primary">
                    <div class="panel-heading">
                      <i class="fa fa-cogs"></i> Evaluation Settings
                    </div>
                    <div class="panel-body">
                      <div class="paddedWrapper">
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <i class="fa fa-users"></i> Negative Control Outcome Cohort Definition
                            </div>
                            <div class="panel-body">
                              This expression will define the criteria for inclusion and duration of time for cohorts intended for use as negative control outcomes. 
                              <nc-outcome-cohort-settings-editor params="negativeControlCohortSettings: $component.estimationAnalysis.negativeControlOutcomeCohortDefinition"></nc-outcome-cohort-settings-editor>
                            </div>
                          </div>
                          <div class="panel panel-default">
                            <div class="panel-heading">
                              <i class="fa fa-cog"></i> Positive Control Synthesis
                            </div>
                            <div class="panel-body">
                              <div>
                                  <label>Should we perform positive control synthesis to calibrate confidence intervals?</label>
                                  <div class="input-group">
                                      <select class="form-control" data-bind="options: $component.options.yesNoOptions, optionsText:'name', optionsValue:'id', value: $component.estimationAnalysis.doPositiveControlSynthesis"></select>
                                  </div>
                              </div>
                              <div data-bind="visible: $component.estimationAnalysis.doPositiveControlSynthesis">
                                <positive-control-synthesis-settings-editor params="settings: $component.estimationAnalysis.positiveControlSynthesisArgs"></positive-control-synthesis-settings-editor>
                              </div>
                            </div>
                          </div>
                      </div>    
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
        <div role="tabpanel" data-bind="css: { active: $component.tabMode() == 'utilities' }" class="tab-pane">
          <div class="paddedWrapper">
            <ul class="nav nav-pills">
              <li role="presentation" data-bind="css: {active: $component.utilityPillMode() == 'print' }, click: function() {$component.utilityPillMode('print') };"><a>Print Friendly</a></li>
              <li role="presentation" data-bind="css: {active: $component.utilityPillMode() == 'download' }, click: function() {$component.utilityPillMode('download') };"><a>Download</a></li>
              <li role="presentation" data-bind="css: {active: $component.utilityPillMode() == 'import' }, click: function() {$component.utilityPillMode('import') };"><a>Import</a></li>
              <li role="presentation" data-bind="css: {active: $component.utilityPillMode() == 'export' }, click: function() {$component.utilityPillMode('export') };"><a>Export</a></li>
            </ul>
            <div role="tabpanel" data-bind="visible: $component.utilityPillMode() == 'print'" class="tab-pane">
              <div class="paddedWrapper">
                print friendly
              </div>
            </div>
            <div role="tabpanel" data-bind="visible: $component.utilityPillMode() == 'download'" class="tab-pane">
              <div class="paddedWrapper">
                download
              </div>
            </div>
            <div role="tabpanel" data-bind="visible: $component.utilityPillMode() == 'import'" class="tab-pane">
              <div class="paddedWrapper">
                import
              </div>
            </div>
            <div role="tabpanel" data-bind="visible: $component.utilityPillMode() == 'export'" class="tab-pane">
              <div class="paddedWrapper">
                <pre id="estimationSpecificationExport" data-bind="html: $component.estimationAnalysisJson(), selectOnFocus: {events: ['click']}"></pre>
                JSON.stringify <button class="btn btn-sm" data-bind="click: prepForSave">Prep for save</button> 
                <pre id="exportJSON" data-bind="html: $component.estimationAnalysisForWebAPI(), selectOnFocus: {events: ['click']}"></pre>
              </div>
          </div>
          </div>
        </div>
      </div>  
    </div>
    <div id="editors" data-bind="visible: $component.managerMode() == 'editor'">
      <div id="editor-heading" class="editor-container">
        <div class="paddedWrapper">
          <div class="panel panel-default">
              <div class="panel-heading">
                <div class="row">
                  <div data-bind="click: closeEditor" class="editor-back-icon"><i class="fa fa-chevron-left fa-lg"></i></div>
                  <div>
                    <div class="editor-heading" data-bind="text: $component.editorHeading"></div>
                    <div data-bind="text: $component.editorDescription"></div>
                  </div>
                </div>
              </div>
              <div class="panel-body" data-bind="if: $component.editorComponentName() != null">
                <div id="editorComponent" data-bind='component: {name: $component.editorComponentName(), params: $component.editorComponentParams()}'></div>
              </div>
          </div>
        </div>
      </div>
    </div>
</div>