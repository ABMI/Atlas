<div id="wrapperLoading" data-bind="if: $component.loadingCohort()">
	<div class="wrapperTitle">
		<i class="fa fa-refresh fa-spin"></i> Loading...
	</div>
</div>

<div data-bind="if: !$component.loadingCohort()">

	<!--div class="modal fade" id="cohortDefinitionChooser" tabindex="-1" role="dialog">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">Choose Cohort Definition</div>
				<div class="modal-body">
					<cohort-definition-browser params="{services: $component.services, cohortDefinitionSelected: $component.cohortDefinitionSelected}"></cohort-definition-browser>
				</div>
			</div>
		</div>
	</div-->

	<!--div class="reportControls pad-5">
		<div class="row">
			<div class="col-xs-12">
				<button class="form-control btn btn-xs btn-primary" data-bind="click: $component.showBrowser, text:$component.cohortDefinitionButtonText"></button>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<select class="form-control" data-bind="css : { invalid: $component.sourceKey()==undefined }, options:$component.config.services[0].sources.filter($component.hasCDM), optionsValue:'sourceKey', optionsText:'sourceName', value:$component.sourceKey, optionsCaption:'Select a Source'"></select>
			</div>
		</div>
	</div-->

	<div data-bind="visible:$component.personId">
		<div class="paddedWrapper">
			<div class="row">
				<div class="col-xs-2 text-left">
					<div data-bind="click:$component.navigatePrevious" class="btn btn-xs btn-primary"><i class="fa fa-chevron-left"></i></div>
				</div>
				<div class="col-xs-8 text-center heading">
					<i class="fa fa-user"></i> <span data-bind="text:$component.personId"></span>
				</div>
				<div class="col-xs-2 text-right">
					<div data-bind="click:$component.navigateNext" class="btn btn-xs btn-primary"><i class="fa fa-chevron-right"></i></div>
				</div>
			</div>
		</div>

		<div data-bind="visible:$component.loadingProfile()" class="loading">loading</div>

		<div class="paddedWrapper" data-bind="visible:!$component.loadingProfile()">
			<!--div data-bind="visible:$component.filteredRecs().length > 0"-->
				<div id="profile-chart" data-bind="profileChart:{
							profile:$component.loadedProfile, 
							cohortPerson:$component.cohortPerson, 
							recs:$component.filteredRecs, 
							zoomFilter:$component.dimensions.profileChart.filter,
							highlightRecs:$component.highlightRecs,
							allRecs:$component.crossfilter().all(),
							showing: $component.showing,
						}"></div>
				<div id="wordcloud" data-bind="with:$component.dimensions.wordcloud">
					<div class="wordcloud" data-bind="foreach:words($component.filteredRecs)">
						<span data-bind="
							text:text, 
							style:{fontSize:size},
							event:{mouseenter:(word,evt)=>$component.highlight(word.recs, evt), mouseleave:(word,evt)=>$component.highlight([], evt)},
							"></span>
					</div>
				</div>
				<!--div class="heading">Profile Records</div-->
				<faceted-datatable-cf id="profile-manager-table" params="{
						recs: $component.filteredRecs,
						columns: $component.columns, 
						facets: $component.facetsObs, 
						order: [[3,'asc']],
						searchFilter: $component.searchHighlight,
						rowClick: $component.datatableRowClickCallback,
					}"></faceted-datatable-cf>
						<!--searchFilter: $component.dimensions.search.filter,-->
			<!--/div-->
		</div>
	</div>

	<div id="modalNoMembers" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					This cohort has no members available to view. Please check the generation status in the Cohort Definition section of Atlas.
				</div>
			</div>
		</div>
	</div>

</div>
