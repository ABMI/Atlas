<div class="row">
	<div class="col-md-8">
		<div>
			<label>Choose your target cohort:</label>
			<div class="input-group">
				<input class="form-control" type="text" disabled data-bind="value: cohortComparison().treatmentCaption" />
				<span class="input-group-btn">
									<button class="btn btn-primary" data-bind="click:chooseTreatment"><i class="fa fa-folder-open"></i></button>
									<button class="btn btn-danger" data-bind="disable:cohortComparison().treatmentId() == 0, click:clearTreatment" type="button"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
							</span>
			</div>
			<div data-bind="visible: cohortComparison().treatmentId() > 0 && cohortComparison().treatmentCaption() == null" class="errorInline"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> The target cohort specified (#<span data-bind="text:cohortComparison().treatmentId()"></span>) was deleted. Please select a different cohort.</div>
		</div>
		<div>
			<label>Choose your outcome cohort:</label>
			<div class="input-group">
				<input class="form-control" type="text" disabled data-bind="value: cohortComparison().outcomeCaption" />
				<span class="input-group-btn">
								<button class="btn btn-primary" data-bind="click:chooseOutcome"><i class="fa fa-folder-open"></i></button>
								<button class="btn btn-danger" data-bind="disable:cohortComparison().outcomeId() == 0,click:clearOutcome" type="button"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
							</span>
			</div>
			<div data-bind="visible: cohortComparison().outcomeId() > 0 && cohortComparison().outcomeCaption() == null" class="errorInline"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> The outcome cohort specified (#<span data-bind="text:cohortComparison().outcomeId()"></span>) was deleted. Please select a different cohort.</div>
		</div>
		<div>
			<label>Specify the statistical model used predict the outcome amongst the target cohort:</label>
			<div class="input-group">
				<select class="form-control" data-bind="options: cohortComparison().modelTypeOptions, optionsText:'name', optionsValue:'id', value: cohortComparison().modelType, optionsCaption: 'Select a model...'"></select>
			</div>
		</div>
		<div>
			<label>Define the time-at-risk window start, relative to target cohort entry:</label>
			<div class="input-group">
				<span contenteditable="true" class="numericInputField dropdown" data-bind="htmlValue: cohortComparison().timeAtRiskStart.numeric(), eventType:'blur', ko_autocomplete: { value: cohortComparison().timeAtRiskStart, source: $component.options.dayOptions, minLength: 0, maxShowItems: 10, scroll: true }" />days from cohort start date
			</div>
		</div>
		<div>
			<label>Define the time-at-risk window end:</label>
			<div class="input-group">
				<span contenteditable="true" class="numericInputField dropdown" data-bind="htmlValue: cohortComparison().timeAtRiskEnd.numeric(), eventType:'blur', ko_autocomplete: { value: cohortComparison().timeAtRiskEnd, source: $component.options.dayOptions, minLength: 0, maxShowItems: 10, scroll: true }" />days from cohort start date
			</div>
		</div>
		<div>
			<label>Minimum washout period applied to target cohort:</label>
			<div class="input-group">
				<span contenteditable="true" class="numericInputField dropdown" data-bind="htmlValue: cohortComparison().minimumWashoutPeriod.numeric(), eventType:'blur', ko_autocomplete: { value: cohortComparison().minimumWashoutPeriod, source: $component.options.dayOptions, minLength: 0, maxShowItems: 10, scroll: true }" />
			</div>
		</div>
		<div>
			<label>Remove patients who have observed the outcome prior to cohort entry?</label>
			<div class="input-group">
				<select class="form-control" data-bind="options: $component.options.yesNoOptions, optionsText:'name', optionsValue:'id', value: cohortComparison().rmPriorOutcomes"></select>
			</div>
		</div>
		<div>
			<div>
				<label>Which types of baseline covariates do you want to include in the prediction model?</label>
				<ul>
					<li>Demographics</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDemographicsGender" />Gender</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDemographicsAge" />Age group (5-year bands)</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDemographicsYear" />Index year</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDemographicsMonth" />Index month</li>
						<li>
							<input type="checkbox" data-bind="checked: cohortComparison().psDemographicsRace" />Race</li>
						<li>
							<input type="checkbox" data-bind="checked: cohortComparison().psDemographicsEthnicity" />Ethnicity</li>
					</ul>
				</ul>
				<ul>
					<li>Conditions</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionOcc30d" />In prior 30d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionOcc365d" />In prior 365d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionOccInpt180d" />In prior 180d within inpatient setting</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionEraEver" />All time prior</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionEraOverlap" />Overlapping index date</li>
					</ul>
				</ul>
				<ul>
					<li>Condition aggregation</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionGroupSnomed" />SNOMED</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psConditionGroupMeddra" />MedDRA</li>
					</ul>
				</ul>
				<ul>
					<li>Drugs</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugInPrior30d" />In prior 30d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugInPrior365d" />In prior 365d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugEraEver" />All time prior</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugEraOverlap" />Overlapping index date</li>
					</ul>
				</ul>
				<ul>
					<li>Drug aggregation</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugExposure" />Clinical Drug</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugEra" />Ingredient</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psDrugGroup" />ATC Class</li>
					</ul>
				</ul>
				<ul>
					<li>Procedures</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psProcedureOcc30d" />In prior 30d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psProcedureOcc365d" />In prior 365d</li>
					</ul>
				</ul>
				<ul>
					<li>Measurement</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psMeasurement30d" />Existence in prior 30d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psMeasurement365d" />Existence in prior 365d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psMeasurementCount365d" />Count in prior 365d</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psMeasurementBelow" />Has latest prior numeric value below normal range</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psMeasurementAbove" />Has latest prior numeric value above normal range</li>
					</ul>
				</ul>
				<ul>
					<li>Risk scores</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psRiskScoresCharlson" />Charlson</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psRiskScoresChads2" />CHADS2</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psRiskScoresDcsi" />DCSI</li>
					</ul>
				</ul>
				<ul>
					<li>
						<input type="checkbox" data-bind="checked: cohortComparison().psConceptCounts" />Concept counts (count of distinct conditions/procedures/visits in history)</li>
				</ul>
				<ul>
					<li>Interaction terms</li>
					<ul>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psInteractionYear" />By index year</li>
						<li>
							<input type="checkbox" data-bind="checked:cohortComparison().psInteractionMonth" />By index month</li>
					</ul>
				</ul>
			</div>
			<div>
				<label>What concepts do you want to include in baseline covariates in the propensity score model? (Leave blank if you want to include everything)</label>
				<div class="input-group">
					<input class="form-control" type="text" disabled data-bind="value: cohortComparison().psInclusionCaption" />
					<span class="input-group-btn">
									<button class="btn btn-primary"><i class="fa fa-folder-open"></i></button>
									<button class="btn btn-danger" data-bind="disable: cohortComparison().psInclusionId() == 0" type="button"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
								</span>
				</div>
				<div data-bind="visible: cohortComparison().psInclusionId() > 0 && cohortComparison().psInclusionCaption() == null" class="errorInline"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> The concept set specified (#<span data-bind="text:cohortComparison().psInclusionId()"></span>) was deleted. Please select a different concept set.</div>
			</div>
			<div>
				<label>What concepts do you want to exclude from baseline covariates in the propensity score model? (Leave blank if you want to include everything)</label>
				<div class="input-group">
					<input class="form-control" type="text" disabled data-bind="value: cohortComparison().psExclusionCaption" />
					<span class="input-group-btn">
									<button class="btn btn-primary"><i class="fa fa-folder-open"></i></button>
									<button class="btn btn-danger" data-bind="disable:cohortComparison().psExclusionId() == 0" type="button"><i class="fa fa-times-circle" aria-hidden="true"></i></button>
								</span>
				</div>
				<div data-bind="visible: cohortComparison().psExclusionId() > 0 && cohortComparison().psExclusionCaption() == null" class="errorInline"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> The concept set specified (#<span data-bind="text:cohortComparison().psExclusionId()"></span>) was deleted. Please select a different concept set.</div>
			</div>
			<div>
				<label>How do you want to restrict your cohorts based on the propensity score distribution?</label>
				<div class="input-group">
					<select class="form-control" data-bind="options: cohortComparison().trimOptions, optionsText:'name', optionsValue:'id', value: cohortComparison().psTrim"></select>
					<span data-bind="if: cohortComparison().psTrim() != 0">Trim Fraction (1-100%):<input class="form-control" type="text" data-bind="value: cohortComparison().psTrimFraction" /></span>
				</div>
			</div>
			<div>
				<label>Do you want to perform matching or stratification?</label>
				<div class="input-group">
					<select class="form-control" data-bind="options: cohortComparison().matchingOptions, optionsText:'name', optionsValue:'id', value: cohortComparison().psMatch"></select>
					<span data-bind="if: cohortComparison().psMatch() == 1">How many comparator patients do you want to select for each target patient (within a defined caliper)?<input class="form-control" type="text" data-bind="value: cohortComparison().psMatchMaxRatio" /></span>
					<span data-bind="if: cohortComparison().psStrat() == true">How many strata do you want to use?<input class="form-control" type="text" data-bind="value: cohortComparison().psStratNumStrata" /></span>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-4"></div>
	<div id="modalCohortDefinition" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<div class="modal-title">Choose a Cohort</div>
				</div>
				<div class="modal-body">
					<cohort-definition-browser params="{model: self.model, cohortDefinitionSelected: cohortSelected}"></cohort-definition-browser>
				</div>
			</div>
		</div>
	</div>
</div>
